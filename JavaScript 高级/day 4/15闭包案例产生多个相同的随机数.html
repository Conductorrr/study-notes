<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>title</title>
  <script>

    function showRandom() {
      var num=parseInt(Math.random()*10+1);
      console.log(num);
    }
    showRandom();
    showRandom();
    showRandom();



    //闭包的方式,产生三个随机数,但是都是相同的

    function f1() {
      var num=parseInt(Math.random()*10+1);
      return function () {
        console.log(num);
      }
    }

    var ff=f1();
    var ff2=f1();

    ff();
    ff();
    ff();

    ff2();
    ff2();

    //总结:如果想要缓存数据,就把这个数据放在外层的函数和里层的函数的中间位置

    /*闭包原理：内部函数会将外部函数的活动对象添加到它的作用域链中，这样内部函数就能访问外部函数中定义的所有变量，并且外
      部函数在执行完毕之后，其活动对象也不会销毁，因为内部函数的作用域链仍然在引用这个活动对象，直到内部函数销毁后，外部
      函数的活动对象才会被销毁。
      (这里将f1下的num缓存了，本身f1调用完毕后里面的变量mun应该释放的，可是有闭包的存在，仍然在使用num不能及时的释放)
    */ 

    /*闭包的作用：
      封装局部变量，模块化开发，避免全局变量带来的污染（把一些不需要暴露在全局的变量放在外部函数里封装成局部变量，大函数中有一些代码能够独立出来，封装小函数里面，调用一次大函数，后面就可以调用小函数了）
      让有需要的变量(外部函数中的变量)保持在内存中，不立马被js的垃圾回收机制回收（起到一个缓存数据的作用。节流函数，防抖函数等都需要通过闭包方法实现）
    */

    //闭包的缺点：由于闭包里作用域返回的局部变量资源不会被立刻销毁回收,所以可能会占用更多的内存;所以过度使用闭包会导致性能下降
  </script>
</head>
<body>


</body>
</html>